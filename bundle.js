(()=>{"use strict";var t={187:t=>{var e,i="object"==typeof Reflect?Reflect:null,n=i&&"function"==typeof i.apply?i.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,e){return new Promise((function(i,n){function o(){void 0!==r&&t.removeListener("error",r),i([].slice.call(arguments))}var r;"error"!==e&&(r=function(i){t.removeListener(e,o),n(i)},t.once("error",r)),t.once(e,o)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var s=10;function f(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function u(t,e,i,n){var o,r,s,u;if(f(i),void 0===(r=t._events)?(r=t._events=Object.create(null),t._eventsCount=0):(void 0!==r.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),r=t._events),s=r[e]),void 0===s)s=r[e]=i,++t._eventsCount;else if("function"==typeof s?s=r[e]=n?[i,s]:[s,i]:n?s.unshift(i):s.push(i),(o=l(t))>0&&s.length>o&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=s.length,u=h,console&&console.warn&&console.warn(u)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},o=h.bind(n);return o.listener=i,n.wrapFn=o,o}function c(t,e,i){var n=t._events;if(void 0===n)return[];var o=n[e];return void 0===o?[]:"function"==typeof o?i?[o.listener||o]:[o]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(o):p(o,o.length)}function v(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function p(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var o="error"===t,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var f=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw f.context=s,f}var l=r[t];if(void 0===l)return!1;if("function"==typeof l)n(l,this,e);else{var u=l.length,h=p(l,u);for(i=0;i<u;++i)n(h[i],this,e)}return!0},r.prototype.addListener=function(t,e){return u(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return u(this,t,e,!0)},r.prototype.once=function(t,e){return f(e),this.on(t,a(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return f(e),this.prependListener(t,a(this,t,e)),this},r.prototype.removeListener=function(t,e){var i,n,o,r,s;if(f(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(o=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){s=i[r].listener,o=r;break}if(o<0)return this;0===o?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,o),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var o,r=Object.keys(i);for(n=0;n<r.length;++n)"removeListener"!==(o=r[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},r.prototype.listeners=function(t){return c(this,t,!0)},r.prototype.rawListeners=function(t){return c(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},r.prototype.listenerCount=v,r.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},550:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomColor=e.getColors=void 0;var i=["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#f39c12","#c0392b","#d35400","#bdc3c7","#7f8c8d"];e.getColors=function(){return i},e.getRandomColor=function(){return i[Math.floor(Math.random()*i.length)]}},607:(t,e,i)=>{var n=i(811);(function(){function t(){}return t.main=function(){var t,e,i,o,r=document.getElementById("canvas"),s=r.getContext("2d");if(null!=r&&null!=s){var f=(null!==(e=null===(t=document.defaultView)||void 0===t?void 0:t.innerHeight)&&void 0!==e?e:100)-25,l=(null!==(o=null===(i=document.defaultView)||void 0===i?void 0:i.innerWidth)&&void 0!==o?o:100)-25,u=new n.TileField(r,s,l,f,13);u.init(),u.on("enter",(function(t){t.updateRandomColor(s),console.log("+",t)})),u.on("leave",(function(t){t.draw(s),console.log("-",t)})),u.on("mousedown",(function(t){var e=u.getTileAbsolute(t.clientX,t.clientY);null!=e&&e.updateRandomColor(s)}))}else console.log("Canvas not found.")},t})().main()},728:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Location=void 0;var i=function(){function t(t,e,i){void 0===i&&(i=0),this.x=t,this.y=e,this.offset=i,this.xAbs=t+i,this.yAbs=e+i}return t.empty=function(){return n},t.prototype.isEmpty=function(){return-1==this.x||-1==this.y},t.prototype.between=function(t,e,i,n){return void 0===n&&(n=!1),t>=(n?this.xAbs:this.x)&&e>=(n?this.yAbs:this.y)&&t<=(n?i.xAbs:i.x)&&e<=(n?i.yAbs:i.y)},t.prototype.add=function(e,i){return new t(this.x+e,this.y+i,this.offset)},t}();e.Location=i;var n=new i(-1,-1,0)},43:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tile=void 0;var n=i(550),o=function(){function t(t,e,i,n,o){this.id=t,this.x=e,this.y=i,this.width=n,this.height=o}return t.prototype.draw=function(t){this.updateColor(t,"#FFFFFF")},t.prototype.isBelow=function(t,e){return t>=this.x&&e>=this.y&&t<=this.x+this.width&&e<=this.y+this.height},t.prototype.updateColor=function(t,e,i){void 0===i&&(i=!0),i&&console.log("[Tile #"+this.id+"]: Changing color to "+e);var n=t.fillStyle;t.fillStyle=e,t.fillRect(this.x,this.y,this.width,this.height),t.fillStyle=n},t.prototype.updateRandomColor=function(t){this.updateColor(t,n.getRandomColor())},t}();e.Tile=o},811:function(t,e,i){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.TileField=e.TileContainer=void 0;var r=i(187),s=i(43),f=i(728),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tiles=[],e}return o(e,t),e}(r.EventEmitter);e.TileContainer=l;var u=function(){function t(t){this.field=t,this.areaTile=null,this.from=f.Location.empty(),this.to=f.Location.empty()}return t.prototype.hasLeft=function(t,e,i){return void 0===i&&(i=!1),this.from.isEmpty()||this.to.isEmpty()||!this.from.between(t,e,this.to,i)},t.prototype.onMove=function(t,e){if(!this.hasLeft(t-this.field.offset,e-this.field.offset,!1))return!1;null!=this.areaTile&&this.field.emit("leave",this.areaTile);var i=this.field.getTileAbsolute(t,e);return null==i?null!=this.areaTile?(this.from=new f.Location(this.areaTile.x-this.field.offset,this.areaTile.y-this.field.offset,this.field.offset),this.to=new f.Location(this.areaTile.x+this.areaTile.width+this.field.offset,this.areaTile.y+this.areaTile.height+this.field.offset,this.field.offset)):(this.from=f.Location.empty(),this.to=f.Location.empty()):(this.field.emit("enter",i),this.from=new f.Location(i.x,i.y,this.field.offset),this.to=new f.Location(i.x+i.width,i.y+i.height)),this.areaTile=i,!0},t}(),h=function(t){function e(e,i,n,o,r,s,f){void 0===r&&(r=5),void 0===s&&(s=Math.floor(2.9*r)),void 0===f&&(f=10);var l=t.call(this)||this;return l.canvas=e,l.ctx=i,l.width=n,l.height=o,l.rows=r,l.columns=s,l.offset=f,l.mouseDown=!1,l.canvas.height=l.height,l.canvas.width=l.width,l.canvas.style.background="#000000",l.tileWidth=Math.floor((l.width-l.offset)/l.columns-l.offset),l.tileHeight=Math.floor((l.height-l.offset)/l.rows-l.offset),l.tileUpdater=new u(l),l.registerListeners(),l}return o(e,t),e.prototype.init=function(){for(var t=0,e=this.offset;e<this.width-this.offset;e+=this.tileWidth+this.offset)for(var i=this.offset;i<this.height-this.offset;i+=this.tileHeight+this.offset){var n=new s.Tile(t++,e,i,this.tileWidth,this.tileHeight);n.updateColor(this.ctx,"#EEEEEE"),this.tiles.push(n),console.log("Filled rect:",e,i,this.tileWidth,this.tileHeight)}},e.prototype.getTileRelative=function(t,e){for(var i=0,n=this.tiles;i<n.length;i++){var o=n[i];if(o.isBelow(t,e))return o}return null},e.prototype.getTileAbsolute=function(t,e){return this.getTileRelative(t-this.offset,e-this.offset)},e.prototype.registerListeners=function(){var t=this;this.canvas.onmousemove=function(e){var i=e.clientX,n=e.clientY;t.tileUpdater.onMove(i,n),t.emit("mousemove",e)},this.canvas.onkeydown=function(e){t.emit("keydown",e)},this.canvas.onmousedown=function(e){t.emit("mousedown",e)},this.canvas.onmouseup=function(e){t.emit("mouseup",e)}},e}(l);e.TileField=h}},e={};!function i(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}(607)})();