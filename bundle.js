(()=>{"use strict";var t={187:t=>{var e,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function r(){r.init.call(this)}t.exports=r,t.exports.once=function(t,e){return new Promise((function(n,i){function o(){void 0!==r&&t.removeListener("error",r),n([].slice.call(arguments))}var r;"error"!==e&&(r=function(n){t.removeListener(e,o),i(n)},t.once("error",r)),t.once(e,o)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var s=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function h(t,e,n,i){var o,r,s,h;if(l(n),void 0===(r=t._events)?(r=t._events=Object.create(null),t._eventsCount=0):(void 0!==r.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),r=t._events),s=r[e]),void 0===s)s=r[e]=n,++t._eventsCount;else if("function"==typeof s?s=r[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(o=u(t))>0&&s.length>o&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=s.length,h=f,console&&console.warn&&console.warn(h)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=f.bind(i);return o.listener=n,i.wrapFn=o,o}function c(t,e,n){var i=t._events;if(void 0===i)return[];var o=i[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):p(o,o.length)}function v(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return u(this)},r.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var o="error"===t,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var l=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw l.context=s,l}var u=r[t];if(void 0===u)return!1;if("function"==typeof u)i(u,this,e);else{var h=u.length,f=p(u,h);for(n=0;n<h;++n)i(f[n],this,e)}return!0},r.prototype.addListener=function(t,e){return h(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return h(this,t,e,!0)},r.prototype.once=function(t,e){return l(e),this.on(t,a(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,a(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,i,o,r,s;if(l(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===e||n[r].listener===e){s=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,s||e)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},r.prototype.listeners=function(t){return c(this,t,!0)},r.prototype.rawListeners=function(t){return c(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},r.prototype.listenerCount=v,r.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},550:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomColor=e.getColors=void 0;var n=["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#f39c12","#c0392b","#d35400","#bdc3c7","#7f8c8d"];e.getColors=function(){return n},e.getRandomColor=function(){return n[Math.floor(Math.random()*n.length)]}},607:(t,e,n)=>{var i=n(811);(function(){function t(){}return t.main=function(){var t,e,n,o,r=document.getElementById("canvas"),s=r.getContext("2d");if(null!=r&&null!=s){var l=(null!==(e=null===(t=document.defaultView)||void 0===t?void 0:t.innerHeight)&&void 0!==e?e:100)-25,u=(null!==(o=null===(n=document.defaultView)||void 0===n?void 0:n.innerWidth)&&void 0!==o?o:100)-25;new i.TileField(r,s,u,l).init()}else console.log("Canvas not found.")},t})().main()},43:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tile=void 0;var i=n(550),o=function(){function t(t,e,n,i,o){this.id=t,this.x=e,this.y=n,this.width=i,this.height=o}return t.prototype.draw=function(t){this.updateColor(t,"#FFFFFF")},t.prototype.isBelow=function(t,e){return t>=this.x&&e>=this.y&&t<=this.x+this.width&&e<=this.y+this.height},t.prototype.updateColor=function(t,e,n){void 0===n&&(n=!0),n&&console.log("[Tile #"+this.id+"]: Changing color to "+e);var i=t.fillStyle;t.fillStyle=e,t.fillRect(this.x,this.y,this.width,this.height),t.fillStyle=i},t.prototype.updateRandomColor=function(t){this.updateColor(t,i.getRandomColor())},t}();e.Tile=o},811:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TileField=e.TileContainer=void 0;var r=n(187),s=n(43),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tiles=[],e}return o(e,t),e}(r.EventEmitter);e.TileContainer=l;var u=function(t){function e(e,n,i,o,r,s,l){void 0===r&&(r=5),void 0===s&&(s=Math.floor(2.9*r)),void 0===l&&(l=10);var u=t.call(this)||this;return u.canvas=e,u.ctx=n,u.width=i,u.height=o,u.rows=r,u.columns=s,u.offset=l,u.mouseDown=!1,u.lastX=0,u.lastY=0,u.canvas.height=u.height,u.canvas.width=u.width,u.canvas.style.background="#000000",u.tileWidth=Math.floor((u.width-u.offset)/u.columns-u.offset),u.tileHeight=Math.floor((u.height-u.offset)/u.rows-u.offset),u.registerListeners(),u}return o(e,t),e.prototype.init=function(){for(var t=0,e=this.offset;e<this.width-this.offset;e+=this.tileWidth+this.offset)for(var n=this.offset;n<this.height-this.offset;n+=this.tileHeight+this.offset){var i=new s.Tile(t++,e,n,this.tileWidth,this.tileHeight);i.updateColor(this.ctx,"#EEEEEE"),this.tiles.push(i),console.log("Filled rect:",e,n,this.tileWidth,this.tileHeight)}},e.prototype.getTileAt=function(t,e){for(var n=0,i=this.tiles;n<i.length;n++){var o=i[n];if(o.isBelow(t,e))return o}return null},e.prototype.registerListeners=function(){var t=this;this.canvas.onmousedown=function(e){t.onMouseDown(e)},this.canvas.onmouseup=function(e){t.onMouseUp(e)},this.canvas.onmousemove=function(e){t.onMouseMove(e)}},e.prototype.mouseUpdate=function(t,e){var n=t-this.offset,i=e-this.offset,o=this.getTileAt(n,i);return null==o?(console.log("Updated no tile!"),null):(console.log("Update:",o),o.updateRandomColor(this.ctx),o)},e.prototype.onMouseDown=function(t){this.lastX=t.clientX,this.lastY=t.clientY;var e=this.mouseUpdate(t.clientX,t.clientY);null!=e&&(this.mouseDown=!0,this.lastX=e.x+e.width/2,this.lastY=e.y+e.height/2)},e.prototype.onMouseMove=function(t){this.mouseDown&&(Math.abs(t.clientX-this.lastX)<this.tileWidth&&Math.abs(t.clientY-this.lastY)<this.tileHeight||(this.lastX=t.clientX,this.lastY=t.clientY,this.mouseUpdate(this.lastX,this.lastY)))},e.prototype.onMouseUp=function(t){this.mouseDown=!1},e}(l);e.TileField=u}},e={};!function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}(607)})();