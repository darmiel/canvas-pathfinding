(()=>{"use strict";var e={187:e=>{var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,i){function r(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,r),i(n)},e.once("error",o)),e.once(t,r)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function h(e,t,n,i){var r,o,s,h;if(l(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=a(e))>0&&s.length>r&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,h=u,console&&console.warn&&console.warn(h)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=u.bind(i);return r.listener=n,i.wrapFn=r,r}function c(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):p(r,r.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var l=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw l.context=s,l}var a=o[e];if(void 0===a)return!1;if("function"==typeof a)i(a,this,t);else{var h=a.length,u=p(a,h);for(n=0;n<h;++n)i(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return h(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return h(this,e,t,!0)},o.prototype.once=function(e,t){return l(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,r,o,s;if(l(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return c(this,e,!0)},o.prototype.rawListeners=function(e){return c(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},o.prototype.listenerCount=v,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},550:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomColor=t.getColors=void 0;var n=["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#f39c12","#c0392b","#d35400","#bdc3c7","#7f8c8d"];t.getColors=function(){return n},t.getRandomColor=function(){return n[Math.floor(Math.random()*n.length)]}},607:(e,t,n)=>{var i=n(811);(function(){function e(){}return e.main=function(){var e,t,n,r,o=document.getElementById("canvas"),s=o.getContext("2d");if(null!=o&&null!=s){var l=(null!==(t=null===(e=document.defaultView)||void 0===e?void 0:e.innerHeight)&&void 0!==t?t:100)-25,a=(null!==(r=null===(n=document.defaultView)||void 0===n?void 0:n.innerWidth)&&void 0!==r?r:100)-25,h=new i.TileField(o,s,a,l,10);h.init(),h.on("enter",(function(e){e.updateRandomColor(s),console.log("+",e)})),h.on("leave",(function(e){e.draw(s),console.log("-",e)}))}else console.log("Canvas not found.")},e})().main()},43:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tile=void 0;var i=n(550),r=function(){function e(e,t,n,i,r){this.id=e,this.x=t,this.y=n,this.width=i,this.height=r}return e.prototype.draw=function(e){this.updateColor(e,"#FFFFFF")},e.prototype.isBelow=function(e,t){return e>=this.x&&t>=this.y&&e<=this.x+this.width&&t<=this.y+this.height},e.prototype.updateColor=function(e,t,n){void 0===n&&(n=!0),n&&console.log("[Tile #"+this.id+"]: Changing color to "+t);var i=e.fillStyle;e.fillStyle=t,e.fillRect(this.x,this.y,this.width,this.height),e.fillStyle=i},e.prototype.updateRandomColor=function(e){this.updateColor(e,i.getRandomColor())},e.prototype.getAbsoluteLocation=function(e){return{x:this.x+e,y:this.y+e}},e}();t.Tile=r},811:function(e,t,n){var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TileField=t.TileContainer=void 0;var o=n(187),s=n(43),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tiles=[],t}return r(t,e),t}(o.EventEmitter);t.TileContainer=l;var a=function(e){function t(t,n,i,r,o,s,l){void 0===o&&(o=5),void 0===s&&(s=Math.floor(2.9*o)),void 0===l&&(l=10);var a=e.call(this)||this;return a.canvas=t,a.ctx=n,a.width=i,a.height=r,a.rows=o,a.columns=s,a.offset=l,a.mouseDown=!1,a.lastX=0,a.lastY=0,a.canvas.height=a.height,a.canvas.width=a.width,a.canvas.style.background="#000000",a.tileWidth=Math.floor((a.width-a.offset)/a.columns-a.offset),a.tileHeight=Math.floor((a.height-a.offset)/a.rows-a.offset),a.areaTile=null,a.areaFromX=a.width,a.areaFromY=a.height,a.areaToX=a.width,a.areaToY=a.height,a.registerListeners(),a}return r(t,e),t.prototype.init=function(){for(var e=0,t=this.offset;t<this.width-this.offset;t+=this.tileWidth+this.offset)for(var n=this.offset;n<this.height-this.offset;n+=this.tileHeight+this.offset){var i=new s.Tile(e++,t,n,this.tileWidth,this.tileHeight);i.updateColor(this.ctx,"#EEEEEE"),this.tiles.push(i),console.log("Filled rect:",t,n,this.tileWidth,this.tileHeight)}},t.prototype.getTileRelative=function(e,t){for(var n=0,i=this.tiles;n<i.length;n++){var r=i[n];if(r.isBelow(e,t))return r}return null},t.prototype.getTileAbsolute=function(e,t){return this.getTileRelative(e-this.offset,t-this.offset)},t.prototype.registerListeners=function(){var e=this;this.canvas.onmousemove=function(t){e.onMouseMove(t)},this.canvas.onkeydown=function(e){console.log(e)}},t.prototype.onMouseMove=function(e){var t=e.clientX,n=e.clientY;if(t<this.areaFromX||t>this.areaToX||n<this.areaFromY||n>this.areaToY){null!=this.areaTile&&this.emit("leave",this.areaTile);var i=this.getTileAbsolute(t,n);if(this.areaTile=i,null!=this.areaTile){var r=this.areaTile.getAbsoluteLocation(this.offset),o=r.x,s=r.y;this.areaFromX=o,this.areaToX=o+this.areaTile.width,this.areaFromY=s,this.areaToY=s+this.areaTile.height,console.log(t,n,this.areaFromX,this.areaFromY),this.emit("enter",this.areaTile)}else this.areaFromX=this.width,this.areaFromY=this.height}},t}(l);t.TileField=a}},t={};!function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(607)})();